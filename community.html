<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>BSBKTV μ»¤λ®¤λ‹ν‹°</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <a href="index.html">β† BSBKTV ν™μΌλ΅</a>
    <h1>μ»¤λ®¤λ‹ν‹° κ²μ‹ν</h1>
  </header>

  <main id="board-list"></main>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="supabase-client.js"></script>
<script>
  async function loadBoards() {
    console.log('loadBoards start');

    const { data, error } = await supabase
      .from('boards')
      .select('id, name, emoji, is_public')
      .eq('is_public', true)
      .order('id', { ascending: true });

    const container = document.getElementById('board-list');

    if (error) {
      alert('μ—λ¬: ' + error.message);   // μ΄ μ¤„ μ¶”κ°€
      container.innerText = 'κ²μ‹νμ„ λ¶λ¬μ¤λ” μ¤‘ μ¤λ¥κ°€ λ°μƒν–μµλ‹λ‹¤.';
      return;
    }

    if (!data || data.length === 0) {
      container.innerText = 'μ•„μ§ μƒμ„±λ κ²μ‹νμ΄ μ—†μµλ‹λ‹¤.';
      return;
    }

    container.innerHTML = data.map(b => `
      <a class="board-item" href="board.html?board_id=${b.id}">
        <span class="emoji">${b.emoji || 'π“‚'}</span>
        <span class="name">${b.name}</span>
      </a>
    `).join('');
  }

  loadBoards();
</script>
</body>
</html>
