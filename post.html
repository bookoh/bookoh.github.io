<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>게시글 디버그</title>
</head>
<body>
  <pre id="out">loading...</pre>

  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script src="supabase-client.js"></script>
  <script>
    const out = document.getElementById('out');
    const params = new URLSearchParams(location.search);
    const postId = parseInt(params.get('id') || '0', 10);

    async function run() {
      out.textContent = 'postId=' + postId;

      if (!postId) {
        out.textContent = 'no id';
        return;
      }

      try {
        const { data, error } = await supa
          .from('posts')
          .select('*')
          .eq('id', postId)
          .single();

        out.textContent = JSON.stringify({ data, error }, null, 2);
      } catch (e) {
        out.textContent = 'JS ERROR: ' + e.message;
      }
    }

    run();
  </script>
</body>
</html>
